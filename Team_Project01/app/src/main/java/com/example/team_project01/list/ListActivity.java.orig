package com.example.team_project01.list;

import androidx.appcompat.app.AppCompatActivity;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;

import android.content.Intent;
import android.os.Bundle;
import android.util.Log;

import com.example.team_project01.R;
<<<<<<< HEAD
import com.example.team_project01.common.CommonVal;
import com.example.team_project01.conn.CommonAskTask;
import com.example.team_project01.store.AndBookmarkVO;
import com.example.team_project01.store.StoreActivity;
=======
import com.example.team_project01.common.BasketVO;
import com.example.team_project01.conn.CommonConn;
import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;
>>>>>>> 1eb25d5da661d8ca699fff27629321ad92e042f7

import java.util.ArrayList;

public class ListActivity extends AppCompatActivity {
    RecyclerView recv_list;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_list);
        recv_list = findViewById(R.id.recv_list);

<<<<<<< HEAD
        //리스트에 가게 정보 임의로 넣음
        ArrayList<ListDTO>  list = new ArrayList<>();
        list.add(new ListDTO(R.drawable.spaghetti, "한식1", "성범비빔밥1", "5.0(999)+", "5km(농성동)"));
        list.add(new ListDTO(R.drawable.spaghetti, "한식2", "성범비빔밥2", "4.0(999)+", "4km(농성동)"));
        list.add(new ListDTO(R.drawable.spaghetti, "한식3", "성범비빔밥3", "3.0(999)+", "3km(농성동)"));
        list.add(new ListDTO(R.drawable.spaghetti, "한식4", "성범비빔밥4", "2.0(999)+", "2km(농성동)"));
        list.add(new ListDTO(R.drawable.spaghetti, "한식5", "성범비빔밥5", "1.0(999)+", "1km(농성동)"));
        list.add(new ListDTO(R.drawable.spaghetti, "한식6", "성범비빔밥6", "5.0(999)+", "6km(농성동)"));
        list.add(new ListDTO(R.drawable.spaghetti, "한식7", "성범비빔밥7", "4.0(999)+", "7km(농성동)"));
        list.add(new ListDTO(R.drawable.spaghetti, "한식8", "성범비빔밥8", "3.0(999)+", "8km(농성동)"));

        RecyclerView.LayoutManager layoutManager = new LinearLayoutManager(getLayoutInflater().getContext(), RecyclerView.VERTICAL, false);
        ListAdapter adapter = new ListAdapter(getLayoutInflater() , list, ListActivity.this);
        recv_list.setLayoutManager(layoutManager);
        recv_list.setAdapter(adapter);
=======
        recv_select();




>>>>>>> 1eb25d5da661d8ca699fff27629321ad92e042f7
    }


    public void recv_select(){
        CommonConn conn = new CommonConn(ListActivity.this, "andStoreList");
        conn.excuteConn(new CommonConn.ConnCallback() {
            @Override
            public void onResult(boolean isResult, String data) {
                if(isResult) { //서버와 통신이 성공적으로 끝났을때.
                    Log.d("가게리스트", "onResult: " + data);
                    ArrayList<Store_infoDTO> list = new Gson().fromJson(data,
                            new TypeToken<ArrayList<Store_infoDTO>>(){}.getType());
                    Log.d("사이즈", "onResult: " + list.size());
                    Intent intent = getIntent();
                    BasketVO basketDTO = (BasketVO) intent.getSerializableExtra("basketDTO");
                    RecyclerView.LayoutManager layoutManager = new LinearLayoutManager(getLayoutInflater().getContext(), RecyclerView.VERTICAL, false);
                    ListAdapter adapter = new ListAdapter(getLayoutInflater() , list, ListActivity.this, basketDTO);
                    recv_list.setLayoutManager(layoutManager);
                    recv_list.setAdapter(adapter);

                }
            }
        });




    }

}